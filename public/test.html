<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chat Sidebar Layout — SPA with Persistent URL Fetch</title>
  <style>
    :root{--bg:#ffffff;--panel:#f7f7f7;--muted:#6b7280;--accent:#2898f5;--dark:#0f1720;--glass:rgba(0,0,0,0.03)}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,Arial;color:var(--dark);background:linear-gradient(180deg,#ffffff,#fbfbfd)}
    .app{display:flex;min-height:100vh;height:100vh;width:100vw}

    /* Sidebar */
    .sidebar{width:260px;background:#fafafa;border-right:1px solid #eee;padding:18px;display:flex;flex-direction:column;gap:12px}
    .brand{display:flex;align-items:center;gap:8px}
    .logo{width:38px;height:38px;border-radius:8px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    .brand h1{font-size:14px;margin:0}
    .new-btn{margin-left:auto;padding:6px 8px;border:1px solid #ddd;background:white;border-radius:6px;cursor:pointer}

    .conversations{flex:1;overflow:auto;padding-top:8px;display:flex;flex-direction:column;gap:8px}
    .conv{padding:10px;border-radius:8px;background:white;border:1px solid transparent;display:flex;justify-content:space-between;align-items:center;cursor:pointer}
    .conv:hover{border-color:#e6e6e6;box-shadow:0 1px 2px rgba(0,0,0,0.03)}
    .conv.selected{background:linear-gradient(90deg, rgba(40,152,245,0.06), rgba(40,152,245,0.02));border-left:4px solid var(--accent);padding-left:8px}
    .conv .meta{overflow:hidden}
    .conv h4{margin:0;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .conv p{margin:2px 0 0 0;font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    /* Main content */
    .content{flex:1;display:flex;flex-direction:column;align-items:stretch}

    /* Home center when no conversation selected */
    .home{
      flex:1;display:flex;align-items:center;justify-content:center;padding:40px;
    }
    .hero{max-width:780px;text-align:center}
    .hero h1{font-size:28px;margin:0 0 6px}
    .hero p{color:var(--muted);margin:0 0 18px}
    .hero .input-row{display:flex;gap:12px;align-items:flex-start}
    .hero textarea{width:100%;min-height:56px;padding:12px;border:1px solid #e5e7eb;border-radius:6px;resize:vertical;font-size:14px}
    .hero .send{padding:10px 14px;background:var(--accent);color:white;border:none;border-radius:6px;cursor:pointer}

    /* Chat view */
    .chat-shell{display:flex;flex-direction:column;height:100%}
    .chat-header{padding:18px;border-bottom:1px solid #f0f0f0;display:flex;align-items:center;justify-content:space-between}
    .chat-header h2{margin:0;font-size:18px}
    .chat-area{flex:1;overflow:auto;padding:18px;display:flex;flex-direction:column;gap:12px;background:linear-gradient(180deg,#fff,#fbfbfd)}
    .message{max-width:880px;padding:12px;border-radius:10px;background:white;border:1px solid #eee}
    .message.me{margin-left:auto;background:linear-gradient(180deg, #e6f2ff, #dff0ff)}
    .message .meta{font-size:12px;color:var(--muted);margin-bottom:6px}

    /* input pinned bottom in chat view */
    .chat-input{padding:12px;border-top:1px solid #f0f0f0;display:flex;gap:12px;align-items:flex-start}
    .chat-input textarea{flex:1;min-height:52px;padding:10px;border:1px solid #e5e7eb;border-radius:6px;resize:vertical}
    .chat-input button{padding:10px 14px;background:var(--accent);color:white;border:none;border-radius:6px;cursor:pointer}

    /* small helper */
    .muted{color:var(--muted)}

    @media (max-width:900px){.sidebar{display:none}.app{flex-direction:column}.content{height:calc(100vh - 56px)}}
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar" aria-label="Danh sách cuộc trò chuyện">
      <div class="brand">
        <div class="logo">KB</div>
        <h1>KAGGLE BOT</h1>
        <button class="new-btn" id="newChatBtn">New</button>
      </div>

      <div class="conversations" id="conversations" role="list"></div>
      <div style="font-size:12px;color:var(--muted);padding-top:8px">Tip: khi chọn 'New' hoặc không chọn bất kỳ chat nào, bạn sẽ ở giao diện tạo chat mới.</div>
    </aside>

    <main class="content" id="content">
      <!-- Home / New Chat View (visible when no id in URL) -->
      <div class="home" id="homeView" style="display:none">
        <div class="hero">
          <h1>ChatBot Application</h1>
          <p class="muted">Supporting advanced information search on dietary supplements from Chemist Warehouse, Chemist Outlet, etc</p>
          <div class="input-row" style="margin-top:18px">
            <textarea id="homeInput" placeholder="Enter question..."></textarea>
            <button class="send" id="homeSend">Send</button>
          </div>
        </div>
      </div>

      <!-- Chat view (visible when a conversation is selected) -->
      <div class="chat-shell" id="chatShell" style="display:none">
        <div class="chat-header">
          <h2 id="chatTitle">Conversation</h2>
          <div class="muted" id="chatSubtitle">...</div>
        </div>
        <div class="chat-area" id="chatArea"></div>
        <div class="chat-input" id="chatInputRow">
          <textarea id="chatInput" placeholder="Enter message..."></textarea>
          <button id="chatSend">Send</button>
        </div>
      </div>
    </main>
  </div>

  <script>
    // --- Data model: each conversation has id,title,snippet,time,messages[] ---


  </script>
</body>
</html>
